<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Production-Ready Webflow Embed</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      margin: 0;
      padding: 20px;
      line-height: 1.6;
    }
    
    h1 {
      margin-bottom: 30px;
    }
    
    .content {
      max-width: 800px;
      margin: 0 auto;
    }
    
    .demo-block {
      background-color: #f7f7f7;
      border: 1px solid #ddd;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 4px;
    }
    
    button {
      background-color: #0077FF;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
    }
    
    button:hover {
      background-color: #0066DD;
    }
    
    pre {
      background-color: #f1f1f1;
      padding: 15px;
      border-radius: 4px;
      overflow-x: auto;
    }
    
    .instructions {
      background-color: #fffde7;
      border-left: 4px solid #ffc107;
      padding: 15px;
      margin: 20px 0;
    }
  </style>
</head>
<body>
  <div class="content">
    <h1>Aro-Ha AI Chat Widget</h1>
    
    <div class="demo-block">
      <h2>Interactive Elements Test</h2>
      <p>Click on the buttons below to verify that the chat widget doesn't block interactions:</p>
      
      <button id="test-button-1">Test Button 1</button>
      <button id="test-button-2">Test Button 2</button>
      <button id="test-button-3">Test Button 3</button>
      
      <script>
        document.getElementById('test-button-1').addEventListener('click', () => {
          alert('Button 1 was clicked!');
        });
        
        document.getElementById('test-button-2').addEventListener('click', () => {
          alert('Button 2 was clicked!');
        });
        
        document.getElementById('test-button-3').addEventListener('click', () => {
          alert('Button 3 was clicked!');
        });
      </script>
    </div>
    
    <div class="instructions">
      <h3>How to Add This to Webflow</h3>
      <ol>
        <li>Go to your Webflow project settings</li>
        <li>Navigate to "Custom Code" section</li>
        <li>Paste the code below in the "Footer Code" section</li>
        <li>Save and publish your site</li>
      </ol>
      <p>The chat widget will appear in the bottom right of your page.</p>
    </div>
    
    <h3>Embed Code for Webflow</h3>
    <pre><code>&lt;script&gt;
/**
 * Aro-Ha AI Assistant - Webflow Embed Code
 */
(function() {
  // Configuration
  const APP_URL = 'https://arohaunifiedchat.replit.app'; // Change this to your actual deployed URL
  
  // Check if on mobile
  const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
  
  // Create styles
  function injectStyles() {
    const style = document.createElement('style');
    style.textContent = `
      .aro-ha-widget-container {
        position: fixed;
        z-index: 999999;
        pointer-events: none; /* Makes container transparent to clicks by default */
      }
      .aro-ha-widget-button {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 70px;
        height: 70px;
        border-radius: 50%;
        overflow: hidden;
        box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        pointer-events: auto; /* Makes button clickable */
        z-index: 999999;
      }
      .aro-ha-widget-chat {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 380px;
        height: 580px;
        z-index: 999998;
        display: none;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 5px 40px rgba(0,0,0,0.16);
        pointer-events: auto; /* Makes chat clickable */
      }
    `;
    document.head.appendChild(style);
  }
  
  // Create chat button
  function createChatButton() {
    const buttonContainer = document.createElement('div');
    buttonContainer.className = 'aro-ha-widget-button';
    
    const buttonIframe = document.createElement('iframe');
    buttonIframe.src = `${APP_URL}/widget-button`;
    buttonIframe.style.cssText = `
      width: 100%;
      height: 100%;
      border: none;
    `;
    
    buttonContainer.appendChild(buttonIframe);
    document.body.appendChild(buttonContainer);
    
    return buttonContainer;
  }
  
  // Create chat container
  function createChatContainer() {
    const chatContainer = document.createElement('div');
    chatContainer.className = 'aro-ha-widget-chat';
    
    // Adjust for mobile
    if (isMobile) {
      chatContainer.style.width = '100%';
      chatContainer.style.height = '100%';
      chatContainer.style.bottom = '0';
      chatContainer.style.right = '0';
      chatContainer.style.borderRadius = '0';
    }
    
    document.body.appendChild(chatContainer);
    
    return chatContainer;
  }
  
  // Initialize
  function init() {
    // Inject styles
    injectStyles();
    
    // Create elements
    const buttonContainer = createChatButton();
    const chatContainer = createChatContainer();
    
    // Set up event listeners
    setupEventListeners(buttonContainer, chatContainer);
  }
  
  // Set up event listeners
  function setupEventListeners(buttonContainer, chatContainer) {
    window.addEventListener('message', function(event) {
      handleIframeMessages(event, buttonContainer, chatContainer);
    });
  }
  
  // Handle incoming messages from iframes
  function handleIframeMessages(event, buttonContainer, chatContainer) {
    if (!event.data || typeof event.data !== 'object') return;
    
    // Button click event
    if (event.data.type === 'button-click') {
      openWidget(buttonContainer, chatContainer);
    }
    
    // Widget close event
    if (event.data.type === 'widget-close') {
      closeWidget(buttonContainer, chatContainer);
    }
  }
  
  // Open widget
  function openWidget(buttonContainer, chatContainer) {
    // Hide button
    buttonContainer.style.display = 'none';
    
    // Show chat container
    chatContainer.style.display = 'block';
    
    // Create chat iframe if it doesn't exist yet
    if (!chatContainer.querySelector('iframe')) {
      const chatIframe = document.createElement('iframe');
      chatIframe.src = `${APP_URL}/widget-full`;
      chatIframe.style.cssText = `
        width: 100%;
        height: 100%;
        border: none;
      `;
      chatIframe.allow = 'microphone';
      chatContainer.appendChild(chatIframe);
    }
  }
  
  // Close widget
  function closeWidget(buttonContainer, chatContainer) {
    // Hide chat container
    chatContainer.style.display = 'none';
    
    // Show button
    buttonContainer.style.display = 'block';
  }
  
  // Start initialization when DOM is loaded
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
})();
&lt;/script&gt;</code></pre>
  </div>
  
  <!-- Include the widget for testing on this page -->
  <script>
  /**
   * Aro-Ha AI Assistant - Webflow Embed Code
   */
  (function() {
    // Configuration
    const APP_URL = 'https://arohaunifiedchat.replit.app'; // Change this to your actual deployed URL
    
    // Check if on mobile
    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    
    // Create styles
    function injectStyles() {
      const style = document.createElement('style');
      style.textContent = `
        .aro-ha-widget-container {
          position: fixed;
          z-index: 999999;
          pointer-events: none; /* Makes container transparent to clicks by default */
        }
        .aro-ha-widget-button {
          position: fixed;
          bottom: 20px;
          right: 20px;
          width: 70px;
          height: 70px;
          border-radius: 50%;
          overflow: hidden;
          box-shadow: 0 2px 10px rgba(0,0,0,0.2);
          pointer-events: auto; /* Makes button clickable */
          z-index: 999999;
        }
        .aro-ha-widget-chat {
          position: fixed;
          bottom: 20px;
          right: 20px;
          width: 380px;
          height: 580px;
          z-index: 999998;
          display: none;
          border-radius: 12px;
          overflow: hidden;
          box-shadow: 0 5px 40px rgba(0,0,0,0.16);
          pointer-events: auto; /* Makes chat clickable */
        }
      `;
      document.head.appendChild(style);
    }
    
    // Create chat button
    function createChatButton() {
      const buttonContainer = document.createElement('div');
      buttonContainer.className = 'aro-ha-widget-button';
      
      const buttonIframe = document.createElement('iframe');
      buttonIframe.src = `${APP_URL}/widget-button`;
      buttonIframe.style.cssText = `
        width: 100%;
        height: 100%;
        border: none;
      `;
      
      buttonContainer.appendChild(buttonIframe);
      document.body.appendChild(buttonContainer);
      
      return buttonContainer;
    }
    
    // Create chat container
    function createChatContainer() {
      const chatContainer = document.createElement('div');
      chatContainer.className = 'aro-ha-widget-chat';
      
      // Adjust for mobile
      if (isMobile) {
        chatContainer.style.width = '100%';
        chatContainer.style.height = '100%';
        chatContainer.style.bottom = '0';
        chatContainer.style.right = '0';
        chatContainer.style.borderRadius = '0';
      }
      
      document.body.appendChild(chatContainer);
      
      return chatContainer;
    }
    
    // Initialize
    function init() {
      // Inject styles
      injectStyles();
      
      // Create elements
      const buttonContainer = createChatButton();
      const chatContainer = createChatContainer();
      
      // Set up event listeners
      setupEventListeners(buttonContainer, chatContainer);
    }
    
    // Set up event listeners
    function setupEventListeners(buttonContainer, chatContainer) {
      window.addEventListener('message', function(event) {
        handleIframeMessages(event, buttonContainer, chatContainer);
      });
    }
    
    // Handle incoming messages from iframes
    function handleIframeMessages(event, buttonContainer, chatContainer) {
      if (!event.data || typeof event.data !== 'object') return;
      
      // Button click event
      if (event.data.type === 'button-click') {
        openWidget(buttonContainer, chatContainer);
      }
      
      // Widget close event
      if (event.data.type === 'widget-close') {
        closeWidget(buttonContainer, chatContainer);
      }
    }
    
    // Open widget
    function openWidget(buttonContainer, chatContainer) {
      // Hide button
      buttonContainer.style.display = 'none';
      
      // Show chat container
      chatContainer.style.display = 'block';
      
      // Create chat iframe if it doesn't exist yet
      if (!chatContainer.querySelector('iframe')) {
        const chatIframe = document.createElement('iframe');
        chatIframe.src = `${APP_URL}/widget-full`;
        chatIframe.style.cssText = `
          width: 100%;
          height: 100%;
          border: none;
        `;
        chatIframe.allow = 'microphone';
        chatContainer.appendChild(chatIframe);
      }
    }
    
    // Close widget
    function closeWidget(buttonContainer, chatContainer) {
      // Hide chat container
      chatContainer.style.display = 'none';
      
      // Show button
      buttonContainer.style.display = 'block';
    }
    
    // Start initialization when DOM is loaded
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', init);
    } else {
      init();
    }
  })();
  </script>
</body>
</html>