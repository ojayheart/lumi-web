<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aro-Ha Chat Widget - Webflow Integration Guide</title>
  <style>
    :root {
      --primary: #8E8F70;
      --primary-dark: #767657;
      --text: #333;
      --background: #f8f8f8;
      --container: #ffffff;
      --border: #e0e0e0;
    }
    
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      line-height: 1.6;
      color: var(--text);
      background-color: var(--background);
      margin: 0;
      padding: 20px;
    }
    
    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
    }
    
    h1, h2, h3 {
      color: var(--primary);
    }
    
    h1 {
      text-align: center;
      margin-bottom: 1.5rem;
      font-size: 2.2rem;
    }
    
    .section {
      background-color: var(--container);
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      padding: 30px;
      margin-bottom: 30px;
      border: 1px solid var(--border);
    }
    
    .code-block {
      background-color: #f5f5f5;
      border-radius: 4px;
      padding: 20px;
      overflow-x: auto;
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', monospace;
      font-size: 14px;
      line-height: 1.4;
      border: 1px solid #e0e0e0;
      margin: 20px 0;
      white-space: pre-wrap;
    }
    
    .highlight {
      background-color: #fffde7;
      padding: 2px 4px;
      border-radius: 2px;
    }
    
    .button {
      background-color: var(--primary);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.2s;
      text-decoration: none;
      display: inline-block;
    }
    
    .button:hover {
      background-color: var(--primary-dark);
    }
    
    .steps {
      counter-reset: step-counter;
      padding-left: 0;
      list-style-type: none;
    }
    
    .steps li {
      position: relative;
      padding-left: 40px;
      margin-bottom: 20px;
    }
    
    .steps li::before {
      content: counter(step-counter);
      counter-increment: step-counter;
      position: absolute;
      left: 0;
      top: 0;
      width: 28px;
      height: 28px;
      background-color: var(--primary);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }
    
    .note {
      background-color: #e8f4fd;
      border-left: 4px solid #2196f3;
      padding: 15px;
      margin: 20px 0;
      border-radius: 4px;
    }
    
    .demo-area {
      border-top: 1px solid var(--border);
      margin-top: 40px;
      padding-top: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Aro-Ha Chat Widget - Webflow Integration Guide</h1>
    
    <div class="section">
      <h2>Overview</h2>
      <p>
        This guide provides step-by-step instructions for integrating the Aro-Ha AI chat widget into your Webflow site.
        The implementation is based on the direct integration approach from direct-test.html, which provides the simplest
        and most reliable embedding solution.
      </p>
      
      <div style="margin: 30px auto; text-align: center;">
        <div style="width: 60px; height: 60px; background-color: #8E8F70; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; border: 2px solid rgba(255, 255, 255, 0.8);">
          <svg width="28" height="28" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
          </svg>
        </div>
        <p style="margin-top: 10px; color: #8E8F70; font-weight: bold;">The Aro-Ha Chat Button</p>
      </div>
    </div>
    
    <div class="section">
      <h2>Integration Steps</h2>
      <p>Follow these simple steps to add the Aro-Ha chat widget to your Webflow site:</p>
      
      <ol class="steps">
        <li>
          <h3>Access Webflow's Custom Code Settings</h3>
          <p>Log in to your Webflow dashboard and navigate to <span class="highlight">Site Settings > Custom Code</span> in the left sidebar.</p>
        </li>
        
        <li>
          <h3>Add the Widget Code to Footer</h3>
          <p>Copy the following code and paste it into the <span class="highlight">Footer Code</span> section:</p>
          
          <div class="code-block" id="embedCode">
&lt;script&gt;
/**
 * Aro-Ha AI Assistant Webflow Embed Code
 */
(function() {
  // Configuration
  const config = {
    chatButtonColor: '#8E8F70',
    buttonPosition: { bottom: '20px', right: '20px' },
    chatWidgetUrl: 'https://arohaunifiedchat.replit.app/widget-full'
  };

  // Initialize when DOM is fully loaded
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }

  function init() {
    // Create and inject CSS
    injectStyles();
    
    // Create chat button
    const chatButton = createChatButton();
    
    // Create chat container
    const chatContainer = createChatContainer();
    
    // Set up event listeners
    setupEventListeners(chatButton, chatContainer);
  }

  function injectStyles() {
    const style = document.createElement('style');
    style.textContent = `
      /* Widget Styles */
      .aro-ha-chat-button {
        position: fixed;
        bottom: ${config.buttonPosition.bottom};
        right: ${config.buttonPosition.right};
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background-color: ${config.chatButtonColor};
        box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        cursor: pointer;
        z-index: 9999;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 2px solid rgba(255, 255, 255, 0.8);
        transition: transform 0.2s ease;
      }
      
      .aro-ha-chat-button:hover {
        transform: scale(1.05);
      }
      
      .aro-ha-chat-button svg {
        width: 30px;
        height: 30px;
        fill: white;
      }
      
      .aro-ha-chat-container {
        position: fixed;
        bottom: ${config.buttonPosition.bottom};
        right: ${config.buttonPosition.right};
        width: 380px;
        height: 580px;
        background: white;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 5px 40px rgba(0,0,0,0.16);
        z-index: 9998;
        display: none;
      }
      
      .aro-ha-chat-container iframe {
        width: 100%;
        height: 100%;
        border: none;
      }
      
      @media (max-width: 768px) {
        .aro-ha-chat-container {
          width: 100vw;
          height: 100vh;
          bottom: 0;
          right: 0;
          border-radius: 0;
        }
      }
    `;
    document.head.appendChild(style);
  }

  function createChatButton() {
    const chatButton = document.createElement('div');
    chatButton.className = 'aro-ha-chat-button';
    chatButton.id = 'aro-ha-chat-button';
    chatButton.innerHTML = `
      <svg width="28" height="28" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <!-- MessageSquare from Lucide (minimal chat icon - outline only) -->
        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
      </svg>
    `;
    document.body.appendChild(chatButton);
    return chatButton;
  }

  function createChatContainer() {
    const chatContainer = document.createElement('div');
    chatContainer.className = 'aro-ha-chat-container';
    chatContainer.id = 'aro-ha-chat-container';
    
    // We'll create the iframe only when needed to save resources
    document.body.appendChild(chatContainer);
    return chatContainer;
  }

  function setupEventListeners(chatButton, chatContainer) {
    // Open chat when button is clicked
    chatButton.addEventListener('click', function() {
      openChat(chatButton, chatContainer);
    });

    // Listen for close message from the chat iframe
    window.addEventListener('message', function(event) {
      if (event.data && event.data.type === 'widget-close') {
        closeChat(chatButton, chatContainer);
      }
    });
  }

  function openChat(chatButton, chatContainer) {
    // Hide button
    chatButton.style.display = 'none';
    
    // Create iframe if it doesn't exist yet
    if (!chatContainer.querySelector('iframe')) {
      const chatIframe = document.createElement('iframe');
      chatIframe.src = config.chatWidgetUrl;
      chatIframe.title = 'Aro Ha Chat';
      chatContainer.appendChild(chatIframe);
    }
    
    // Show chat container
    chatContainer.style.display = 'block';
  }

  function closeChat(chatButton, chatContainer) {
    // Hide chat container
    chatContainer.style.display = 'none';
    
    // Show button
    chatButton.style.display = 'flex';
  }
})();
&lt;/script&gt;</div>
          
          <button class="button" onclick="copyCode()">Copy Code</button>
        </li>
        
        <li>
          <h3>Save and Publish</h3>
          <p>Click <span class="highlight">Save Changes</span> and then publish your site to make the widget live.</p>
        </li>
      </ol>
      
      <div class="note">
        <strong>Note:</strong> The widget will appear on all pages of your Webflow site. It is designed to not interfere
        with other page elements or interactions, and will adapt to both desktop and mobile views.
      </div>
    </div>
    
    <div class="section">
      <h2>Customization Options</h2>
      <p>You can customize the widget by modifying the configuration values at the top of the code:</p>
      <ul>
        <li><code>chatButtonColor</code>: Change the button background color (default: #8E8F70)</li>
        <li><code>buttonPosition</code>: Adjust the position of the button on the screen</li>
        <li><code>chatWidgetUrl</code>: The URL to the chat widget (do not change unless instructed)</li>
      </ul>
    </div>
    
    <div class="section">
      <h2>Key Features</h2>
      <ul>
        <li><strong>Simple Implementation</strong> - Single script with no dependencies</li>
        <li><strong>Direct Approach</strong> - Based on the proven direct-test.html implementation</li>
        <li><strong>Mobile Responsive</strong> - Automatically adapts for mobile devices</li>
        <li><strong>Non-Blocking</strong> - Doesn't interfere with page interactions</li>
        <li><strong>Branded Design</strong> - Matches Aro-Ha's visual identity</li>
      </ul>
    </div>
    
    <div class="demo-area">
      <!-- Widget will be embedded via the inline script below -->
    </div>
  </div>
  
  <script>
    function copyCode() {
      const codeBlock = document.getElementById('embedCode');
      const range = document.createRange();
      range.selectNode(codeBlock);
      window.getSelection().removeAllRanges();
      window.getSelection().addRange(range);
      document.execCommand('copy');
      window.getSelection().removeAllRanges();
      
      alert('Code copied to clipboard!');
    }
  </script>
  
  <!-- Include the direct embed script for demonstration purposes -->
  <script>
  /**
   * Aro-Ha AI Assistant Webflow Embed Code - Live Demo
   */
  (function() {
    // Configuration
    const config = {
      chatButtonColor: '#8E8F70',
      buttonPosition: { bottom: '20px', right: '20px' },
      chatWidgetUrl: window.location.origin + '/widget-full'
    };

    // Initialize when DOM is fully loaded
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', init);
    } else {
      init();
    }

    function init() {
      // Create and inject CSS
      injectStyles();
      
      // Create chat button
      const chatButton = createChatButton();
      
      // Create chat container
      const chatContainer = createChatContainer();
      
      // Set up event listeners
      setupEventListeners(chatButton, chatContainer);
    }

    function injectStyles() {
      const style = document.createElement('style');
      style.textContent = `
        /* Widget Styles */
        .aro-ha-chat-button {
          position: fixed;
          bottom: ${config.buttonPosition.bottom};
          right: ${config.buttonPosition.right};
          width: 60px;
          height: 60px;
          border-radius: 50%;
          background-color: ${config.chatButtonColor};
          box-shadow: 0 2px 10px rgba(0,0,0,0.2);
          cursor: pointer;
          z-index: 9999;
          display: flex;
          align-items: center;
          justify-content: center;
          border: 2px solid rgba(255, 255, 255, 0.8);
          transition: transform 0.2s ease;
        }
        
        .aro-ha-chat-button:hover {
          transform: scale(1.05);
        }
        
        .aro-ha-chat-button svg {
          width: 30px;
          height: 30px;
          fill: white;
        }
        
        .aro-ha-chat-container {
          position: fixed;
          bottom: ${config.buttonPosition.bottom};
          right: ${config.buttonPosition.right};
          width: 380px;
          height: 580px;
          background: white;
          border-radius: 12px;
          overflow: hidden;
          box-shadow: 0 5px 40px rgba(0,0,0,0.16);
          z-index: 9998;
          display: none;
        }
        
        .aro-ha-chat-container iframe {
          width: 100%;
          height: 100%;
          border: none;
        }
        
        @media (max-width: 768px) {
          .aro-ha-chat-container {
            width: 100vw;
            height: 100vh;
            bottom: 0;
            right: 0;
            border-radius: 0;
          }
        }
      `;
      document.head.appendChild(style);
    }

    function createChatButton() {
      const chatButton = document.createElement('div');
      chatButton.className = 'aro-ha-chat-button';
      chatButton.id = 'aro-ha-chat-button';
      chatButton.innerHTML = `
        <svg width="28" height="28" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <!-- MessageSquare from Lucide (minimal chat icon - outline only) -->
          <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
        </svg>
      `;
      document.body.appendChild(chatButton);
      return chatButton;
    }

    function createChatContainer() {
      const chatContainer = document.createElement('div');
      chatContainer.className = 'aro-ha-chat-container';
      chatContainer.id = 'aro-ha-chat-container';
      
      // We'll create the iframe only when needed to save resources
      document.body.appendChild(chatContainer);
      return chatContainer;
    }

    function setupEventListeners(chatButton, chatContainer) {
      // Open chat when button is clicked
      chatButton.addEventListener('click', function() {
        openChat(chatButton, chatContainer);
      });

      // Listen for close message from the chat iframe
      window.addEventListener('message', function(event) {
        if (event.data && event.data.type === 'widget-close') {
          closeChat(chatButton, chatContainer);
        }
      });
    }

    function openChat(chatButton, chatContainer) {
      // Hide button
      chatButton.style.display = 'none';
      
      // Create iframe if it doesn't exist yet
      if (!chatContainer.querySelector('iframe')) {
        const chatIframe = document.createElement('iframe');
        chatIframe.src = config.chatWidgetUrl;
        chatIframe.title = 'Aro Ha Chat';
        chatContainer.appendChild(chatIframe);
      }
      
      // Show chat container
      chatContainer.style.display = 'block';
    }

    function closeChat(chatButton, chatContainer) {
      // Hide chat container
      chatContainer.style.display = 'none';
      
      // Show button
      chatButton.style.display = 'flex';
    }
  })();
  </script>
</body>
</html>